# 极客时间Go语言并发编程实战笔记

## 基本并发原语

### 同步原语的适用场景

1. 共享资源。并发地读写共享资源，会出现数据竞争的问题，所以需要Mutex、RWMutex这样的并发原语来保护
2. 任务编排。需要goroutine按照一定的规律执行，而goroutine之间有相互等待或者依赖的顺序关系，常常使用WaitGroup或者Channel来实现
3. 消息传递。信息交流以及不同的goroutine之间的线程安全的数据交流，常常使用Channel来实现

#### 第一节

- 使用`race detector`检测并发访问共享资源是否有问题，Google基于C/C++的`sanitizers`技术实现 ，编译器通过探测所有的内存访问，加入代码能监视对这些内存地址的访问（读/写），在运行代码的时候，此工具能监控到对共享变量的非同步访问，出现race的时候，就会打印出警告信息
- 可以在编译、测试或者运行的时候加入race参数：`go run -race main.go`
- 缺点：无法在编译时检查出race问题,在运行时加入指令才能检测出来
- Mutex的零值是还没有goroutine等待的未加锁的状态，所以不需要额外的初始化